<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:head>
    <meta charset="UTF-8" />
    <title>artemisa</title>

    <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/5520/5520840.png" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>

    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet' />
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@1.0.4/css/bulma.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css"/>
    <link rel="stylesheet" href="css/stylelibro.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"/>

    
    
   
    
    
    
</h:head>

<h:body>

<div class="main-container">
        <div class="aside">
            <div class="logo">
                <a href="#"><span>A</span>rtemisa <br></br><span>UEB</span></a>
            </div>

            <div class="nav-toggler">
                <span></span>
            </div>

            <ul class="nav">
                <li><a href="menu.xhtml" class="active"><i class="fa fa-home"></i>Home</a></li>
                <li><a href="temario.xhtml"><i class="bi bi-card-heading"></i>Temario</a></li>
                <li><a href="#services" ><i class="bi bi-balloon-heart"></i>Problemas</a></li>
                <li><a href="libro.xhtml" ><i class="bi bi-book-half"></i>Libros</a></li>
                <li><a href="link.xhtml" ><i class="bi bi-link"></i>Links Valiosos</a></li>
                <li><a href="#contact" ><i class="bi bi-calendar-week"></i>Eventos</a></li>
                
                
                <div class="card">
    <h:form>
        <p:growl id="messages" showDetail="true"/>

       
        <p:menuButton  value="Opcion">
            
            
            <p:menuitem value="Judge" url="https://domjudgeacademicueb.com/public" icon="bi bi-code-square"/>
            <p:menuitem value="CodeChef" url="https://www.codechef.com/" icon="bi bi-cookie"/>
            <p:menuitem value="Vjudge" url="https://vjudge.net/group/cuevadelprofdiego" icon="bi bi-emoji-angry"/>
            <p:menuitem value="OnlineJudge" url="https://onlinejudge.org/" icon="bi bi-joystick"/>
        </p:menuButton>
    </h:form>
</div>
                
                
            </ul>
            
            
            
            
            
            
        </div>
        
        
        
        

        
                           
							                            
                            <h:form id="frmLibros">
    <p:messages id="msgs" showDetail="true" closable="true" />

    <ui:repeat value="#{libroPDFBean.libros}" var="lib">
        <div style="margin:10px 0; padding:8px; border:1px solid #ddd; border-radius:8px;">
            <h:outputText value="Libro ID: #{lib.id}" style="display:block; margin-bottom:6px;" />

            <!-- Botón: ver imagen en diálogo -->
            <p:commandButton value="Imagen"
                             process="@this"
                             actionListener="#{libroPDFBean.prepararImagen(lib.id)}"
                             update=":frmLibros:dlgImg :frmLibros:msgs"
                             oncomplete="PF('imgDlg').show()"
                             style="margin-right:8px;" />

            <!-- Botón: descargar PDF (fileDownload ADENTRO del botón) -->
            <p:commandButton value="PDF"
                             process="@this"
                             actionListener="#{libroPDFBean.prepararPdf(lib.id)}"
                             ajax="false">
                <p:fileDownload value="#{libroPDFBean.file}" />
            </p:commandButton>
        </div>
    </ui:repeat>

    <!-- Demo si la lista está vacía -->
    <h:panelGroup rendered="#{empty libroPDFBean.libros}">
        <div style="margin:10px 0; padding:8px; border:1px dashed #aaa; border-radius:8px;">
            <h:outputText value="(Demo) Libro ID: 1" style="display:block; margin-bottom:6px;" />

            <p:commandButton value="Imagen (demo)"
                             process="@this"
                             actionListener="#{libroPDFBean.prepararImagen(1)}"
                             update=":frmLibros:dlgImg :frmLibros:msgs"
                             style="margin-right:8px;" />

            <p:commandButton value="PDF (demo)"
                             process="@this"
                             actionListener="#{libroPDFBean.prepararPdf(1)}"
                             ajax="false">
                <p:fileDownload value="#{libroPDFBean.file}" />
            </p:commandButton>
        </div>
    </h:panelGroup>

    <!-- Diálogo para la imagen -->
    <p:dialog id="dlgImg" widgetVar="imgDlg" header="Vista previa" modal="true"
              responsive="true" dynamic="true" appendTo="@(body)">
        <p:graphicImage value="#{libroPDFBean.imagenStream}" stream="true" cache="false" />
    </p:dialog>
</h:form>
                            
                            
                            
                            
                        </div>
                        
                        
                        
                        
                        
                        
                        
                        
                        

                        
                
                
                
 

   
</h:body>




</html>