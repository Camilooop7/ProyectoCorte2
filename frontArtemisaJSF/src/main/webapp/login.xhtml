<ui:composition template="/templates/template.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:define name="contenido">
        <section class="hero animate__animated animate__fadeIn" style="margin-top:2rem; max-width: 430px;">
            <h2 class="display-4 mb-3 fw-bold">Bienvenida a Artemisa 🌸</h2>
            <p class="lead mb-4">Inicia sesión o crea tu cuenta para comenzar.</p>
            <div class="login-register-card login-register-simple">
                <h:messages globalOnly="true" style="margin-bottom:1rem;" layout="table"
                    styleClass="alert alert-info w-100" errorClass="alert alert-danger w-100"
                    infoClass="alert alert-success w-100" warnClass="alert alert-warning w-100"
                    showDetail="true" showSummary="false" />

                <!-- LOGIN FORM -->
                <h:panelGroup rendered="#{empty param.renderRegister}">
                    <h:form>
                        <i class="fa-solid fa-user-lock card-icon" style="color: var(--rosa-intenso);font-size:2.2rem;margin-bottom:0.6rem;"></i>
                        <h5 class="mb-3 fw-bold" style="color: var(--rosa-intenso);">Iniciar sesión</h5>
                        <div class="mb-3">
                            <h:inputText value="#{userBean.correo}" required="true"
                                placeholder="Correo" styleClass="form-control"
                                style="margin-bottom:0.7rem;" />
                        </div>
                        <div class="mb-3 pw-wrapper">
                            <input type="checkbox" id="pwlogin-toggle" class="pw-toggle" />
                            <label for="pwlogin-toggle" class="pw-toggle-label">
                                <i class="fa fa-eye"></i>
                            </label>
                            <h:inputText value="#{userBean.contrasena}" required="true"
                                placeholder="Contraseña"
                                styleClass="form-control pwfield"
                                redisplay="true"
                                autocomplete="current-password"/>
                        </div>
                        <div>
                            <h:commandButton value="Ingresar" action="#{userBean.login}"
                                styleClass="btn btn-lg w-100"
                                style="margin-top:0.7rem;background:var(--naranja);border-radius:25px;font-weight:600;" />
                        </div>
                        <div class="mt-3" style="text-align:center;">
                            <h:commandButton value="¿No tienes cuenta? Regístrate"
                                action="#"
                                styleClass="card-link btn btn-link"
                                style="color:var(--naranja);font-weight:500;"
                                onclick="this.form.renderRegister.value='1'; this.form.submit(); return false;">
                                <f:ajax render="@form"/>
                            </h:commandButton>
                            <h:inputHidden id="renderRegister" value=""/>
                        </div>
                    </h:form>
                </h:panelGroup>

                <!-- REGISTER FORM -->
                <h:panelGroup rendered="#{param.renderRegister eq '1'}">
                    <h:form>
                        <i class="fa-solid fa-user-plus card-icon" style="color: var(--naranja);font-size:2.2rem;margin-bottom:0.6rem;"></i>
                        <h5 class="mb-3 fw-bold" style="color: var(--naranja);">Crear cuenta</h5>
                        <div class="mb-3">
                            <h:inputText value="#{userBean.nuevoCorreo}" required="true"
                                placeholder="Correo" styleClass="form-control"
                                style="margin-bottom:0.7rem;" />
                        </div>
                        <div class="mb-3">
                            <h:inputText value="#{userBean.nuevoUsuario}" required="true"
                                placeholder="Nombre de usuario" styleClass="form-control"
                                style="margin-bottom:0.7rem;" />
                        </div>
                        <div class="mb-3 pw-wrapper">
                            <input type="checkbox" id="pwreg-toggle" class="pw-toggle" />
                            <label for="pwreg-toggle" class="pw-toggle-label">
                                <i class="fa fa-eye"></i>
                            </label>
                            <h:inputText value="#{userBean.nuevaContrasena}" required="true"
                                placeholder="Contraseña"
                                styleClass="form-control pwfield"
                                redisplay="true"
                                autocomplete="new-password"/>
                        </div>
                        <div>
                            <h:commandButton value="Crear cuenta"
                                action="#{userBean.registrar}" styleClass="btn btn-lg w-100"
                                style="margin-top:0.7rem;background:var(--naranja);border-radius:25px;font-weight:600;" />
                        </div>
                        <div class="mt-3" style="text-align:center;">
                            <h:commandButton value="¿Ya tienes cuenta? Inicia sesión"
                                action="#"
                                styleClass="card-link btn btn-link"
                                style="color:var(--naranja);font-weight:500;"
                                onclick="this.form.renderRegister.value=''; this.form.submit(); return false;">
                                <f:ajax render="@form"/>
                            </h:commandButton>
                            <h:inputHidden id="renderRegister" value=""/>
                        </div>
                    </h:form>
                </h:panelGroup>
            </div>
        </section>
    </ui:define>
</ui:composition>